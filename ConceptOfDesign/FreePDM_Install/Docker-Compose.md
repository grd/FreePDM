# FreePDM Documentation
Docker-Compose is a very interesting platform because of scaleability and security. In this case I am afraid it doesn't really suit very well because it is complicated and also right now it doesn't have the database options yet.

## Install Docker-Compose

This is the list of steps that you should take.

### Install docker and docker-compose
Follow the steps that are required to install [docker](https://docs.docker.com/engine/install/) and [docker-compose](https://docs.docker.com/compose/install/).

### Preparations
Make sure you have a working samba setup, see [Install](Install.md), and also have a network drive that you already mounted.

Type the following to stop samba:
```
sudo systemctl stop smbd
sudo systemctl disable smbd
```
Go to the `FreePDM` directory. Such as `cd FreePDM`

In the root you can find two files that are important for Docker: `Dockerfile`, `docker-compose.yml`. You only need to modify the `docker-compose.yml` file.

#### Note

You can change the lines:
```
- GO_DIRECTORY=/home/user/FreePDM
- GO_WORKDIR=/home/user/FreePDM/cmd/serverapp
```
But you should check *all the lines* inside all `environment:` sections!

The `TZ` field you can modify to your own TimeZone. 

Right now the lines `- /samba/vaultsdata:/samba/vaultsdata` and `- /samba/vaults:/samba/vaults`inside the volumes sections are *hard coded*. This should of course in the future be modifyable.

### Compile docker-compose
```
docker-compose up --build -d
```

Delete the docker-compose file:
```
docker-compose down
```
If you also want to get rid of the data that was generated by Docker, you can add the parameter `-v` in the end.


Test whether the network drive is still working and log in. If that is done then docker works.

### Updating the docker enivronment
Go to the FreePDM directory. Then type:
```
docker compose pull
docker-compose down && docker-compose up --build -d
```

Also check with curl
```
curl http://localhost:50051
```
The output should be `404 page not found`

[<< Previous Chapter](Install.md) | [Content Table](README.md) | [Next Chapter >>](SetupVirtualServer.md)
